---
import { withBasePath } from '../../utils/helpers';
import ModernButton from './ModernButton.astro';

export interface Props {
  heading?: string;
  subheading?: string;
  variant?: 'newsletter' | 'contact' | 'demo' | 'demo-center';
  className?: string;
  backgroundGradient?: 'primary' | 'secondary' | 'accent' | 'dark';
}

const {
  heading = 'Ready to get started?',
  subheading = 'Join thousands of businesses already using our platform.',
  variant = 'newsletter',
  className = '',
  backgroundGradient = 'primary',
} = Astro.props;

const gradients = {
  primary: 'from-primary-600 to-secondary-600',
  secondary: 'from-blue-600 to-purple-600',
  accent: 'from-accent-500 to-accent-700',
  dark: 'from-gray-800 to-gray-900',
};

const ctaId = `cta-${Math.random().toString(36).slice(2, 9)}`;
---

<section
  class={`cta-section bg-gradient-to-r ${gradients[backgroundGradient]} rounded-2xl p-8 lg:p-12 text-center relative overflow-hidden ${className}`}
  aria-labelledby={`${ctaId}-heading`}
  role="region"
>
  <!-- Decorative background elements -->
  <div
    class="pointer-events-none absolute inset-0 overflow-hidden"
    aria-hidden="true"
  >
    <div
      class="absolute -right-24 -top-24 h-48 w-48 rounded-full bg-white/10 blur-3xl"
    >
    </div>
    <div
      class="absolute -bottom-24 -left-24 h-48 w-48 rounded-full bg-white/10 blur-3xl"
    >
    </div>
  </div>

  <div class="relative z-10 mx-auto max-w-3xl">
    <h2
      id={`${ctaId}-heading`}
      class="mb-4 text-3xl font-bold text-white lg:text-4xl"
    >
      {heading}
    </h2>
    <p class="text-primary-100 mb-8 text-xl">
      {subheading}
    </p>

    {
      variant === 'newsletter' && (
        <form
          class="mx-auto flex max-w-md flex-col gap-4 sm:flex-row"
          aria-label="Newsletter subscription form"
        >
          <label for={`${ctaId}-email`} class="sr-only">
            Email address
          </label>
          <input
            aria-label="Email address"
            type="email"
            id={`${ctaId}-email`}
            name="email"
            placeholder="Enter your email"
            required
            autocomplete="email"
            class="flex-1 rounded-lg border border-white/20 bg-white/10 px-4 py-3 text-white placeholder-white/70 transition-all duration-200 focus:border-transparent focus:outline-none focus:ring-2 focus:ring-white/50"
          />
          <ModernButton
            type="submit"
            variant="light"
            className="text-primary-600 hover:bg-gray-100"
          >
            Subscribe
          </ModernButton>
        </form>
      )
    }

    {
      variant === 'contact' && (
        <div
          class="flex flex-col justify-center gap-4 sm:flex-row"
          role="group"
          aria-label="Contact options"
        >
          <ModernButton
            href={withBasePath('contact/')}
            variant="light"
            className="text-primary-600 hover:bg-gray-100"
          >
            Contact Sales
          </ModernButton>
          <ModernButton
            href={withBasePath('demo/')}
            variant="outline"
            className="border-white text-white hover:bg-white hover:text-primary-600"
          >
            Book a Demo
          </ModernButton>
        </div>
      )
    }

    {
      variant === 'demo' && (
        <ModernButton
          href={withBasePath('demo/')}
          variant="light"
          className="text-primary-600 hover:bg-gray-100 text-lg group"
        >
          Start Free Trial
          <svg
            class="ml-2 h-5 w-5 transition-transform duration-200 group-hover:translate-x-1"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
            aria-hidden="true"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M13 7l5 5m0 0l-5 5m5-5H6"
            />
          </svg>
        </ModernButton>
      )
    }

    {
      variant === 'demo-center' && (
        <div
          class="flex flex-col justify-center gap-4 sm:flex-row"
          role="group"
          aria-label="Demo options"
        >
          <ModernButton
            href={withBasePath('demo/')}
            variant="gradient"
            className="from-indigo-600 to-purple-600 shadow-indigo-500/50 text-lg hover:scale-105"
          >
            <span class="mr-2 text-xl" aria-hidden="true">
              ðŸš€
            </span>
            <span>Interactive Demo Center</span>
          </ModernButton>
          <ModernButton
            href={withBasePath('demo/')}
            variant="outline"
            className="border-white text-white hover:bg-white hover:text-primary-600 text-lg"
          >
            <span class="mr-2 text-xl" aria-hidden="true">
              ðŸŽ¨
            </span>
            <span>Visual Showcase</span>
          </ModernButton>
          <ModernButton
            href={withBasePath('contact/')}
            variant="ghost"
            className="bg-white/10 backdrop-blur-sm border border-white/20 text-white hover:bg-white/20"
          >
            <span>Get Personalized Demo</span>
          </ModernButton>
        </div>
      )
    }
  </div>
</section>

<style>
  .cta-section {
    isolation: isolate;
  }
</style>
